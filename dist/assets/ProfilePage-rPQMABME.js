import{r as y,K as D,o as G,c as b,w as a,u as t,k as W,a as V,b as l,l as X,m as Y,n as Z,i as n,F as ee,B as N,g as L,p as te,v as T,N as c,O as g,q as d,a6 as le,A as f,P as _,Q as ae,R as k,t as oe,aj as se,h as i,x as A,y as m,z as I,ak as C,j as ne,$ as O,D as P}from"./index-BR7W-eoC.js";import{M as ue,N as de}from"./index-nbtYRshG.js";import{_ as re,u as ie}from"./_plugin-vue_export-helper-Cp86hJrl.js";const fe={class:"profile-header"},me={class:"profile-info"},pe={class:"profile-status"},ve={key:1,class:"last-active"},ce={class:"stats-container"},ge={class:"stat-item"},_e={class:"stat-value"},ke={class:"stat-item"},Ve={class:"stat-value"},Ie={class:"stat-item"},Ce={class:"stat-value"},we={__name:"ProfilePage",setup(ye){const q=W(),E=ie(),u=y({id:1,firstName:"Иван",lastName:"Петров",email:"petrov@school.ru",role:"teacher",position:"Учитель математики",department:"Кафедра математики",phone:"+7 (900) 123-45-67",lastActive:new Date(new Date().getTime()-18e5)}),r=y({notifications:!0,pushNotifications:!0,emailNotifications:!1,darkTheme:!1}),w=y({lessonsCount:156,documentsCount:23,completedTasksCount:48}),x=D(()=>!0),R=D(()=>u.value.role==="teacher"),h=async()=>{await(await O.create({header:"Выход из системы",message:"Вы уверены, что хотите выйти?",buttons:[{text:"Отмена",role:"cancel"},{text:"Выйти",role:"destructive",handler:()=>j()}]})).present()},j=()=>{E.logout(),q.push("/login"),P.create({message:"Вы успешно вышли из системы",duration:2e3,position:"bottom",color:"medium"}).then(e=>e.present())},z=async()=>{await(await O.create({header:"Изменение пароля",inputs:[{name:"currentPassword",type:"password",placeholder:"Текущий пароль",required:!0},{name:"newPassword",type:"password",placeholder:"Новый пароль",required:!0},{name:"confirmPassword",type:"password",placeholder:"Подтверждение пароля",required:!0}],buttons:[{text:"Отмена",role:"cancel"},{text:"Изменить",handler:e=>e.newPassword!==e.confirmPassword?(S("Пароли не совпадают"),!1):e.newPassword.length<8?(S("Пароль должен содержать не менее 8 символов"),!1):(M("Пароль успешно изменен"),!0)}]})).present()},F=async()=>{alert("Редактирование профиля")},H=s=>{document.body.classList.toggle("dark",s.detail.checked)},M=s=>{P.create({message:s,duration:2e3,position:"bottom",color:"success"}).then(o=>o.present())},S=s=>{P.create({message:s,duration:3e3,position:"bottom",color:"danger"}).then(o=>o.present())},J=s=>s?new Date(s).toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",K=s=>s.split(" ").map(e=>e[0]).join("").toUpperCase(),Q=s=>{const e=["#3880ff","#5260ff","#2dd36f","#ffc409","#eb445a","#92949c"];return e[s%e.length]},$=s=>({admin:"Администратор",teacher:"Преподаватель",technical:"Технический персонал"})[s]||s;return G(async()=>{try{const s=localStorage.getItem("userSettings");s&&(r.value=JSON.parse(s),document.body.classList.toggle("dark",r.value.darkTheme))}catch(s){console.error("Failed to load user data:",s)}}),(s,e)=>(V(),b(t(ne),null,{default:a(()=>[l(t(X),null,{default:a(()=>[l(t(Y),null,{default:a(()=>[l(t(Z),null,{default:a(()=>e[8]||(e[8]=[n("Профиль")])),_:1}),l(t(ee),{slot:"end"},{default:a(()=>[l(t(N),{onClick:h},{default:a(()=>[l(t(L),{slot:"icon-only",icon:t(ue)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),l(t(te),{class:"ion-padding"},{default:a(()=>[l(t(c),null,{default:a(()=>[l(t(g),null,{default:a(()=>{var o,p,U;return[d("div",fe,[d("div",{class:"profile-avatar",style:le({backgroundColor:Q(((o=u.value)==null?void 0:o.id)||1)})},f(K(((p=u.value)==null?void 0:p.firstName)+" "+((U=u.value)==null?void 0:U.lastName)||"Пользователь")),5),d("div",me,[l(t(_),null,{default:a(()=>{var v,B;return[n(f((v=u.value)==null?void 0:v.firstName)+" "+f((B=u.value)==null?void 0:B.lastName),1)]}),_:1}),l(t(ae),null,{default:a(()=>{var v;return[n(f($((v=u.value)==null?void 0:v.role)),1)]}),_:1})])])]}),_:1}),l(t(k),null,{default:a(()=>{var o,p;return[d("div",pe,[x.value?(V(),b(t(se),{key:0,color:"success"},{default:a(()=>[l(t(L),{icon:t(de)},null,8,["icon"]),l(t(i),null,{default:a(()=>e[9]||(e[9]=[n("Онлайн")])),_:1})]),_:1})):T("",!0),!x.value&&((o=u.value)!=null&&o.lastActive)?(V(),oe("div",ve," Последний вход: "+f(J((p=u.value)==null?void 0:p.lastActive)),1)):T("",!0)])]}),_:1})]),_:1}),l(t(c),null,{default:a(()=>[l(t(g),null,{default:a(()=>[l(t(_),null,{default:a(()=>e[10]||(e[10]=[n("Основная информация")])),_:1})]),_:1}),l(t(k),null,{default:a(()=>[l(t(A),{lines:"full"},{default:a(()=>[l(t(m),null,{default:a(()=>[l(t(i),{position:"stacked"},{default:a(()=>e[11]||(e[11]=[n("Email")])),_:1}),l(t(I),{modelValue:u.value.email,"onUpdate:modelValue":e[0]||(e[0]=o=>u.value.email=o),readonly:""},null,8,["modelValue"])]),_:1}),l(t(m),null,{default:a(()=>[l(t(i),{position:"stacked"},{default:a(()=>e[12]||(e[12]=[n("Должность")])),_:1}),l(t(I),{modelValue:u.value.position,"onUpdate:modelValue":e[1]||(e[1]=o=>u.value.position=o),readonly:""},null,8,["modelValue"])]),_:1}),l(t(m),null,{default:a(()=>[l(t(i),{position:"stacked"},{default:a(()=>e[13]||(e[13]=[n("Отдел")])),_:1}),l(t(I),{modelValue:u.value.department,"onUpdate:modelValue":e[2]||(e[2]=o=>u.value.department=o),readonly:""},null,8,["modelValue"])]),_:1}),l(t(m),null,{default:a(()=>[l(t(i),{position:"stacked"},{default:a(()=>e[14]||(e[14]=[n("Телефон")])),_:1}),l(t(I),{modelValue:u.value.phone,"onUpdate:modelValue":e[3]||(e[3]=o=>u.value.phone=o),readonly:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),l(t(c),null,{default:a(()=>[l(t(g),null,{default:a(()=>[l(t(_),null,{default:a(()=>e[15]||(e[15]=[n("Настройки")])),_:1})]),_:1}),l(t(k),null,{default:a(()=>[l(t(A),{lines:"full"},{default:a(()=>[l(t(m),null,{default:a(()=>[l(t(i),null,{default:a(()=>e[16]||(e[16]=[n("Уведомления")])),_:1}),l(t(C),{modelValue:r.value.notifications,"onUpdate:modelValue":e[4]||(e[4]=o=>r.value.notifications=o)},null,8,["modelValue"])]),_:1}),l(t(m),null,{default:a(()=>[l(t(i),null,{default:a(()=>e[17]||(e[17]=[n("Push-уведомления")])),_:1}),l(t(C),{modelValue:r.value.pushNotifications,"onUpdate:modelValue":e[5]||(e[5]=o=>r.value.pushNotifications=o)},null,8,["modelValue"])]),_:1}),l(t(m),null,{default:a(()=>[l(t(i),null,{default:a(()=>e[18]||(e[18]=[n("Email-оповещения")])),_:1}),l(t(C),{modelValue:r.value.emailNotifications,"onUpdate:modelValue":e[6]||(e[6]=o=>r.value.emailNotifications=o)},null,8,["modelValue"])]),_:1}),l(t(m),null,{default:a(()=>[l(t(i),null,{default:a(()=>e[19]||(e[19]=[n("Темная тема")])),_:1}),l(t(C),{modelValue:r.value.darkTheme,"onUpdate:modelValue":e[7]||(e[7]=o=>r.value.darkTheme=o),onIonChange:H},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),l(t(c),null,{default:a(()=>[l(t(g),null,{default:a(()=>[l(t(_),null,{default:a(()=>e[20]||(e[20]=[n("Аккаунт")])),_:1})]),_:1}),l(t(k),null,{default:a(()=>[l(t(N),{expand:"block",onClick:z},{default:a(()=>e[21]||(e[21]=[n(" Изменить пароль ")])),_:1}),l(t(N),{expand:"block",color:"medium",onClick:F},{default:a(()=>e[22]||(e[22]=[n(" Редактировать профиль ")])),_:1})]),_:1})]),_:1}),R.value?(V(),b(t(c),{key:0},{default:a(()=>[l(t(g),null,{default:a(()=>[l(t(_),null,{default:a(()=>e[23]||(e[23]=[n("Статистика")])),_:1})]),_:1}),l(t(k),null,{default:a(()=>[d("div",ce,[d("div",ge,[d("div",_e,f(w.value.lessonsCount),1),e[24]||(e[24]=d("div",{class:"stat-label"},"Проведено уроков",-1))]),d("div",ke,[d("div",Ve,f(w.value.documentsCount),1),e[25]||(e[25]=d("div",{class:"stat-label"},"Документов",-1))]),d("div",Ie,[d("div",Ce,f(w.value.completedTasksCount),1),e[26]||(e[26]=d("div",{class:"stat-label"},"Завершено задач",-1))])])]),_:1})]),_:1})):T("",!0)]),_:1})]),_:1}))}},Pe=re(we,[["__scopeId","data-v-8ab54779"]]);export{Pe as default};
