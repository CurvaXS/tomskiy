import{E as B,r as w,c as I,w as a,u as t,k as P,a as m,b as l,l as x,m as S,F as C,G as _,n as D,i as n,p as E,q as f,s as R,t as V,v,x as T,y as r,h as u,z as d,H as z,J as N,A,B as y,C as H,j as L,D as k}from"./index-BR7W-eoC.js";import{_ as j,u as F}from"./_plugin-vue_export-helper-Cp86hJrl.js";const G={class:"register-container"},J={key:0},M={key:1},O={key:0,class:"error-message"},K={key:1},Q={class:"register-footer"},W={__name:"RegisterPage",setup(X){const b=P(),q=F(),o=B({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",role:"teacher",department:"",position:"",phone:""}),i=w(""),p=w(!1),U=async()=>{var g,e;if(!o.firstName||!o.lastName||!o.email||!o.password||!o.confirmPassword){i.value="Пожалуйста, заполните все поля";return}if(o.password!==o.confirmPassword){i.value="Пароли не совпадают";return}if(o.password.length<8){i.value="Пароль должен содержать не менее 8 символов";return}p.value=!0,i.value="";try{await q.register({firstName:o.firstName,lastName:o.lastName,email:o.email,password:o.password,role:o.role,department:o.department,position:o.position,phone:o.phone}),await(await k.create({message:"Регистрация успешно завершена! Теперь вы можете войти в систему.",duration:3e3,position:"bottom",color:"success"})).present(),b.push("/login")}catch(s){i.value=((e=(g=s.response)==null?void 0:g.data)==null?void 0:e.message)||"Ошибка при регистрации",await(await k.create({message:i.value,duration:3e3,position:"bottom",color:"danger"})).present()}finally{p.value=!1}};return(g,e)=>(m(),I(t(L),null,{default:a(()=>[l(t(x),null,{default:a(()=>[l(t(S),null,{default:a(()=>[l(t(C),{slot:"start"},{default:a(()=>[l(t(_),{"default-href":"/login"})]),_:1}),l(t(D),null,{default:a(()=>e[10]||(e[10]=[n("Регистрация")])),_:1})]),_:1})]),_:1}),l(t(E),{class:"ion-padding"},{default:a(()=>[f("div",G,[e[24]||(e[24]=f("h2",null,"Создание учетной записи",-1)),e[25]||(e[25]=f("p",null,"Выберите тип учетной записи и заполните необходимые данные",-1)),f("form",{onSubmit:R(U,["prevent"]),class:"register-form"},[l(t(T),null,{default:a(()=>[l(t(r),null,{default:a(()=>[l(t(u),{position:"floating"},{default:a(()=>e[11]||(e[11]=[n("Имя")])),_:1}),l(t(d),{modelValue:o.firstName,"onUpdate:modelValue":e[0]||(e[0]=s=>o.firstName=s),required:""},null,8,["modelValue"])]),_:1}),l(t(r),null,{default:a(()=>[l(t(u),{position:"floating"},{default:a(()=>e[12]||(e[12]=[n("Фамилия")])),_:1}),l(t(d),{modelValue:o.lastName,"onUpdate:modelValue":e[1]||(e[1]=s=>o.lastName=s),required:""},null,8,["modelValue"])]),_:1}),l(t(r),null,{default:a(()=>[l(t(u),{position:"floating"},{default:a(()=>e[13]||(e[13]=[n("Email")])),_:1}),l(t(d),{modelValue:o.email,"onUpdate:modelValue":e[2]||(e[2]=s=>o.email=s),type:"email",required:""},null,8,["modelValue"])]),_:1}),l(t(r),null,{default:a(()=>[l(t(u),{position:"floating"},{default:a(()=>e[14]||(e[14]=[n("Пароль")])),_:1}),l(t(d),{modelValue:o.password,"onUpdate:modelValue":e[3]||(e[3]=s=>o.password=s),type:"password",required:"",minlength:"8"},null,8,["modelValue"])]),_:1}),l(t(r),null,{default:a(()=>[l(t(u),{position:"floating"},{default:a(()=>e[15]||(e[15]=[n("Подтверждение пароля")])),_:1}),l(t(d),{modelValue:o.confirmPassword,"onUpdate:modelValue":e[4]||(e[4]=s=>o.confirmPassword=s),type:"password",required:""},null,8,["modelValue"])]),_:1}),l(t(r),null,{default:a(()=>[l(t(u),null,{default:a(()=>e[16]||(e[16]=[n("Тип учетной записи")])),_:1}),l(t(z),{modelValue:o.role,"onUpdate:modelValue":e[5]||(e[5]=s=>o.role=s),interface:"action-sheet",required:""},{default:a(()=>[l(t(N),{value:"teacher"},{default:a(()=>e[17]||(e[17]=[n("Преподаватель")])),_:1}),l(t(N),{value:"staff"},{default:a(()=>e[18]||(e[18]=[n("Персонал")])),_:1})]),_:1},8,["modelValue"])]),_:1}),o.role==="teacher"?(m(),V("div",J,[l(t(r),null,{default:a(()=>[l(t(u),{position:"floating"},{default:a(()=>e[19]||(e[19]=[n("Кафедра")])),_:1}),l(t(d),{modelValue:o.department,"onUpdate:modelValue":e[6]||(e[6]=s=>o.department=s),required:""},null,8,["modelValue"])]),_:1}),l(t(r),null,{default:a(()=>[l(t(u),{position:"floating"},{default:a(()=>e[20]||(e[20]=[n("Должность")])),_:1}),l(t(d),{modelValue:o.position,"onUpdate:modelValue":e[7]||(e[7]=s=>o.position=s),required:""},null,8,["modelValue"])]),_:1})])):v("",!0),o.role==="staff"?(m(),V("div",M,[l(t(r),null,{default:a(()=>[l(t(u),{position:"floating"},{default:a(()=>e[21]||(e[21]=[n("Отдел")])),_:1}),l(t(d),{modelValue:o.department,"onUpdate:modelValue":e[8]||(e[8]=s=>o.department=s),required:""},null,8,["modelValue"])]),_:1}),l(t(r),null,{default:a(()=>[l(t(u),{position:"floating"},{default:a(()=>e[22]||(e[22]=[n("Должность")])),_:1}),l(t(d),{modelValue:o.position,"onUpdate:modelValue":e[9]||(e[9]=s=>o.position=s),required:""},null,8,["modelValue"])]),_:1})])):v("",!0)]),_:1}),i.value?(m(),V("div",O,A(i.value),1)):v("",!0),l(t(y),{expand:"block",type:"submit",disabled:p.value},{default:a(()=>[p.value?(m(),I(t(H),{key:0,name:"crescent"})):(m(),V("span",K,"Зарегистрироваться"))]),_:1},8,["disabled"]),f("div",Q,[l(t(y),{fill:"clear",size:"small","router-link":"/login"},{default:a(()=>e[23]||(e[23]=[n(" Уже есть аккаунт? Войти ")])),_:1})])],32)])]),_:1})]),_:1}))}},h=j(W,[["__scopeId","data-v-0168afb5"]]);export{h as default};
