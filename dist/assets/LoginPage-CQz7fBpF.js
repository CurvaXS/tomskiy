import{r as m,c,u as a,k as x,a as p,w as o,b as t,l as B,m as C,n as S,i as r,p as L,q as s,s as N,t as v,v as q,x as z,y as _,h as I,z as b,A as P,B as g,C as T,j as A,D as w}from"./index-BR7W-eoC.js";import{_ as D,u as E}from"./_plugin-vue_export-helper-Cp86hJrl.js";const U="data:image/png;base64,",j={class:"login-container"},H={key:0,class:"error-message"},M={key:1},R={class:"login-footer"},F={__name:"LoginPage",setup(G){const y=x(),k=E(),u=m(""),i=m(""),n=m(""),d=m(!1),V=async()=>{var f,e;if(!u.value||!i.value){n.value="Пожалуйста, заполните все поля";return}d.value=!0;try{await k.login({email:u.value,password:i.value}),await(await w.create({message:"Вход выполнен успешно!",duration:2e3,position:"bottom",color:"success"})).present(),y.push("/dashboard")}catch(l){n.value=((e=(f=l.response)==null?void 0:f.data)==null?void 0:e.message)||"Ошибка при входе в систему",await(await w.create({message:n.value,duration:3e3,position:"bottom",color:"danger"})).present()}finally{d.value=!1}};return(f,e)=>(p(),c(a(A),null,{default:o(()=>[t(a(B),null,{default:o(()=>[t(a(C),null,{default:o(()=>[t(a(S),null,{default:o(()=>e[2]||(e[2]=[r("Вход в систему")])),_:1})]),_:1})]),_:1}),t(a(L),{class:"ion-padding"},{default:o(()=>[s("div",j,[e[7]||(e[7]=s("div",{class:"logo-container"},[s("img",{src:U,alt:"Логотип",class:"logo"}),s("h2",null,"Образовательный портал"),s("p",null,"Вход для сотрудников образовательного учреждения")],-1)),s("form",{onSubmit:N(V,["prevent"]),class:"login-form"},[t(a(z),null,{default:o(()=>[t(a(_),null,{default:o(()=>[t(a(I),{position:"floating"},{default:o(()=>e[3]||(e[3]=[r("Email")])),_:1}),t(a(b),{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=l=>u.value=l),type:"email",required:""},null,8,["modelValue"])]),_:1}),t(a(_),null,{default:o(()=>[t(a(I),{position:"floating"},{default:o(()=>e[4]||(e[4]=[r("Пароль")])),_:1}),t(a(b),{modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=l=>i.value=l),type:"password",required:""},null,8,["modelValue"])]),_:1})]),_:1}),n.value?(p(),v("div",H,P(n.value),1)):q("",!0),t(a(g),{expand:"block",type:"submit",disabled:d.value},{default:o(()=>[d.value?(p(),c(a(T),{key:0,name:"crescent"})):(p(),v("span",M,"Войти"))]),_:1},8,["disabled"]),s("div",R,[t(a(g),{fill:"clear",size:"small","router-link":"/forgot-password"},{default:o(()=>e[5]||(e[5]=[r(" Забыли пароль? ")])),_:1}),t(a(g),{fill:"clear",size:"small","router-link":"/register"},{default:o(()=>e[6]||(e[6]=[r(" нет аккаунта? ")])),_:1})])],32)])]),_:1})]),_:1}))}},Q=D(F,[["__scopeId","data-v-fe77475c"]]);export{Q as default};
